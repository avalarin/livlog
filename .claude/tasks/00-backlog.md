# Tasks

**improvements**
- refactor: Убрать экран SmartAddEntry и кнопку на экране ContentView для перехода в SmartAddEntry
- feature: На экран AddEntryView добавить кнопку для добавления новой коллекции прямо в момент создания новой записи, кнопка должна быть справа от списка коллекций
- bugfix: На экране ContentView в режиме Grid нужно сделать так, чтобы ячейки были одной ширины, даже если картинка шире. И чтобы ячейки в одной строке выравнивались по верхнему краю.

**backend**
 Epic: нужно добавить backend для работы с AI поиском и для хранения коллекций

- ✅ 16-research-backend-api: research: Описать контракты для Backend API: AI поиск, получение списка коллекций, получение списка entries. Описать контракты в docs/api.md
- ✅ 17-research-auth: research: Провести исследование как сделать авторизацию пользователя в API, чтобы сейчас работал только вход через apple id, но в будущем также можно было вход по email подключить. Описать в docs/auth.md и обновить контракты в docs/api.md
- ✅ 18-design-database-schema: research: Спроектировать схему БД согласно docs/user-scenarios.md и docs/api.md. Поместить результат в docs/database.md. В файле должен быть список таблиц, для каждой таблицы описание для чего она, список колонок, описание индексов, внешних связей, как будут использоваться данные в таблице, какие запросы и как их оптимизировать. Список колонок должен содержать название, тип, наличие индекса, внешние связи, описание колонки.
- feature: Разработать backend сервис на golang в директории backend прямо в этом репозитории, для начала только простую ручку healthcheck. Добавить линтер, команду для запуска тестов, команду для сборки. Добавить Dockerfile, команду для сборки в докер и docker-compose. Добавить postgresql БД с миграциями. Добавить возможность получать конфигурацию сервиса из файла.
- feature: Добавить логику авторизации пользователя через Apple Id. На ios добавить экран, с просьбой авторизоваться и кнопкой apple id, который появляется всегда, когда пользователь не авторизован. На backend добавить простой API проверки авторизации пользователя, и логику сохранения авторизации в БД. Обновить контракты в docs/api.md. Добавить миграции для БД.
- feature: Перенести логику OpenAIService на бэкенд, реализовать ручку для поиска согласно контрактам в docs/api.md. Токен для подключения должен получаться из файла. Добавить лимиты для пользователей: не больше 5 запросов к AI в день. Настройка количества запросов и периода должны получаться из файла. Сразу нужно заложить что экземпляров бэкенд сервиса может быть несколько, поэтому нужно информацию о лимите хранить в базе.
- feature: Перенести хранение коллекций и entries на бэкенд. В структуре базы предусмотреть что в будущем пользователь сможет давать доступ к своей коллекции другим пользователям. Т.е. примерно так: таблица 

